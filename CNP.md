### CNP(contract net protocol)
Contract Net Protocol(CNP)은 자율 에이전트들이 중앙 스케줄러의 직접적인 통제를 받지 않고, 입찰과 협상 과정을 통해 작업을 할당하는 절차를 표준화한 분산 협상 기반 프로토콜이다.  
CNP는 Manager–Contractor 구조로 구성되며, Manager 에이전트가 작업을 공고하면 Contractor 에이전트들은 자신의 상태에 따라 입찰 여부를 결정한다. 
이후 제안된 입찰을 바탕으로 Manager 에이전트가 협상을 통해 작업을 분배한다.

CNP에서는 Contractor 에이전트가 실시간으로 변화하는 자신의 자원 상태를 로컬에서 관리하며, Manager 에이전트의 작업 요청에 대해 입찰 여부를 자율적으로 결정한다. 이러한 구조로 인해 자원 상태가 빠르게 변하는 환경에서도 작업을 동적으로 분배할 수 있다. 또한 중앙 스케줄러 방식과 달리, CNP에서는 작업 단위마다 Manager와 Contractor 에이전트의 역할이 유동적으로 변경될 수 있어 특정 에이전트에 문제가 발생하더라도 시스템 전체로 장애가 확산되는 것을 방지할 수 있다.

네트워크가 불안정하고 작업에 참여하는 에이전트의 수가 많으며, 에이전트의 참여와 이탈이 빈번한 환경에서는 중앙 스케줄러가 모든 에이전트의 자원 상태를 지속적으로 관리하는 것이 현실적으로 어렵다. 이러한 상황에서 CNP는 전역 상태 정보를 유지하지 않고도 입찰과 협상을 통해 작업을 분배함으로써 확장성과 적응성을 확보한다.
또한 에이전트의 자율성 보장이 요구되는 환경에서, CNP는 작업 수행 결과만을 공유하며 각 에이전트의 내부 상태나 의사결정 과정은 외부에 노출하지 않는다는 장점을 가진다.

### CNP의 한계
CNP에서는 Manager 에이전트가 여러 Contractor 에이전트에게 작업 요청 메시지를 전송한 후, 제안이 수집될 때까지 대기하거나 제안들 간의 비교를 통해 최적의 선택을 수행해야 하므로 의사결정 지연이 발생할 수 있다. 특히 참여하는 에이전트 수가 증가할수록 제안 수집과 평가에 소요되는 시간이 증가한다.
또한 에이전트는 불확실한 환경에서 입찰을 수행하므로, 제안 단계에서는 작업 수행이 가능하다고 판단했더라도 실제 작업 과정에서 자원 고갈이나 예기치 못한 문제가 발생할 수 있다. 이 경우 재할당이나 실패 복구와 같은 사후 처리 비용이 추가로 발생한다.
더 나아가 CNP는 하나의 작업 할당을 위해 작업 요청, 제안, 수락, 거절 등 다수의 메시지 교환을 필요로 한다. 따라서 작업에 참여하는 에이전트 수가 많아질수록 통신 횟수가 증가하며, 이는 네트워크 트래픽 증가와 통신 오버헤드로 이어진다.

### 중앙 스케줄러와 CNP(Contract Net Protocol) 비교

분산 시스템에서 작업을 여러 에이전트에게 분배하는 방식은 크게 중앙 스케줄러 방식과 CNP(Contract Net Protocol) 방식으로 구분할 수 있다.
두 방식은 서로 대체 관계라기보다는, 시스템이 가정하는 전제 조건과 운영 환경에 따라 선택되는 구조이다.

CNP에서 Manager 에이전트는 Contractor 에이전트들로부터 제안을 수집한 후, 그중 하나를 선택하여 작업을 위임한다. 이 과정에서 Manager 에이전트가 중앙 스케줄러처럼 동작하는 것이 아닌가 하는 의문이 제기될 수 있다.
그러나 중앙 스케줄러는 시스템 전체의 작업을 상시적으로 관리하며, 자원을 보유하고 있으며 자원의 상태정보를 관리하는 독립된 실행 주체(자원 노드)로부터 자원 상태를 주기적으로 보고받아 전역 상태 정보를 유지한다. 또한 작업을 강제로 할당할 수 있으며, 의사결정 권한이 중앙에 고정되어 있다.

반면 CNP의 Manager 에이전트는 Contractor 에이전트들의 자원 상태를 직접적으로 파악하지 못하며, 입찰을 통해 자발적으로 제공된 정보만을 기반으로 의사결정을 수행한다. 작업 또한 강제 할당되지 않으며, Contractor 에이전트는 제안 제출 여부와 제안 내용에 대해 자율적인 의사결정 권한을 가진다.
즉, 최종 선택은 Manager 에이전트가 수행하지만, 작업 분배 과정 전반은 협상 기반의 분산 의사결정 구조로 이루어진다는 점에서 중앙 스케줄러와 본질적인 차이를 가진다.

### 계층형 CNP
계층형 Contract Net Protocol은 CNP의 Manager–Contractor 구조에서 발생하는 의사결정 병목과 네트워크 혼잡을 완화하기 위해 등장하였다. 기존 CNP에서는 하나의 Manager 에이전트가 다수의 Contractor 에이전트와 직접 통신하며
모든 제안을 수집·비교해야 했으나, 계층형 CNP에서는 하나의 최상위 Manager와 여러 하위 Manager 에이전트로 구성된 계층 구조를 도입한다. 하위 Manager 에이전트는 자신이 관리하는 Contractor 에이전트들과 CNP를 수행한 후,
로컬 의사결정 결과 또는 요약된 정보를 최상위 Manager에게 전달함으로써 통신 범위와 의사결정 부담을 분산시킨다. 그러나 최종 의사결정이 최상위 Manager에 집중되기 때문에 병목이 완전히 제거되진 않으며, 이를 해결하기 위해 
Market-based coordination이나 분산 경매 방식이 제안되었다.

